#
# $Id: Makefile.in 23 2003-05-24 05:39:36Z sorend $
# $Source$
#

include ../Makefile.config

SRCDIR = ..
LIBS = -lcurses

OBJS = ../lib/who.o spy_view.o spy.o ../lib/dirlist.o ../collection/strlist.o ../util/linefilereader.o

WEBSPYOBJS = ../lib/who.o webspy.o webspy_nodeview.o webspy_nodedetailsview.o webspy_dirview.o ../lib/dirlist.o ../collection/strlist.o ../util/linefilereader.o ../lib/macro.o ../collection/hashtable.o ../lib/pwdfile.o ../lib/stringtokenizer.o

WEBSPYLIBS = -lhttpd

# for webspy
#DEFS = -D__DEBUG__

all:	spy

webspy: $(WEBSPYOBJS)
	$(CC) -static -o $@ $(WEBSPYOBJS) $(WEBSPYLIBS) $(DEFS)

spy: $(OBJS)
	$(CC) -o $@ $(OBJS) $(LIBS) $(DEFS)

usage: usage.o ../lib/who.o ../collection/strlist.o ../util/linefilereader.o ../lib/common.o
	$(CC) -o $@ usage.o ../lib/common.o ../lib/who.o ../collection/strlist.o ../util/linefilereader.o $(LIBS) $(DEFS)

clean:
	rm -f *.o *~ spy webspy

release:
	mkdir $(RELEASEDIR)/who
	cp spy*.c spy*.h Makefile README $(RELEASEDIR)/who
